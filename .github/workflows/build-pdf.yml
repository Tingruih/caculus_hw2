# 工作流程的名稱
name: Build Markdown to PDF

# 觸發條件：當有程式碼被 push 到 main 分支時執行
on:
  push:
    branches:
      - main  # 您可以改成您的主要分支名稱，例如 master

# 要執行的任務
jobs:
  build-pdf:
    # 執行任務的虛擬環境，使用最新的 Ubuntu
    runs-on: ubuntu-latest

    # 任務中的步驟
    steps:
      # 步驟一：將您的倉庫程式碼下載到虛擬環境中
      - name: Checkout repository
        uses: actions/checkout@v4

      # 步驟二：安裝所有必要的工具和套件
      - name: Install dependencies
        run: |
          sudo apt-get update
          sudo apt-get install -y pandoc texlive-xetex texlive-fonts-recommended texlive-lang-chinese fonts-noto-cjk

      # 步驟三：直接執行 Pandoc 指令
      - name: Convert Markdown to PDF
        run: |
          pandoc --standalone hw.md --pdf-engine=xelatex -V CJKmainfont="Noto Sans CJK TC" -o hw2.pdf

      # 步驟四：上傳生成的 PDF 作為「產物」(Artifact)
      - name: Upload PDF artifact
        uses: actions/upload-artifact@v4
        with:
          # 產物的名稱
          name: Generated-PDF
          # 要上傳的檔案路徑
          path: hw2.pdf