# 工作流程的名稱
name: Build Markdown to PDF

# 觸發條件：當有程式碼被 push 到 main 分支時執行
on:
  push:
    branches:
      - main  # 您可以改成您的主要分支名稱，例如 master

# 要執行的任務
jobs:
  build-pdf:
    # 執行任務的虛擬環境，使用最新的 Ubuntu
    runs-on: ubuntu-latest

    # 任務中的步驟
    steps:
      # 步驟一：將您的倉庫程式碼下載到虛擬環境中
      - name: Checkout repository
        uses: actions/checkout@v4

      # 步驟二：使用 Pandoc 進行轉換 (核心步驟)
      - name: Convert Markdown to PDF with Pandoc
        # 我們使用一個內建了 Pandoc 和 LaTeX 環境的 Docker 映像檔，非常方便
        uses: docker://pandoc/latex:latest
        with:
          # Pandoc 的指令參數
          args: >-  # '>' 符號表示後續是多行字串
            --standalone
            hw.md
            --pdf-engine=xelatex
            -V CJKmainfont="Noto Sans CJK TC"
            -o hw2.pdf

      # 步驟三：上傳生成的 PDF 作為「產物」(Artifact)
      - name: Upload PDF artifact
        uses: actions/upload-artifact@v4
        with:
          # 產物的名稱
          name: Generated-PDF
          # 要上傳的檔案路徑
          path: hw2.pdf